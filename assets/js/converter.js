
var frCrExRs = {"usd":{"name":"U.S. Dollar","rate":"1","left":"$","decimals":"2"},"eur":{"name":"Euro","rate":"0.8540504261937","left":"\u20ac","decimals":"2"},"gbp":{"name":"U.K. Pound Sterling","rate":"0.7495244281604","left":"\u00a3","decimals":"2"},"aud":{"name":"Australian Dollar","rate":"1.3260045909539","left":"A$ ","decimals":"2"},"cad":{"name":"Canadian Dollar","rate":"1.2852712623877","left":"C$ ","decimals":"2"},"jpy":{"name":"Japanese Yen","rate":"110.15683193687","left":"\u00a5","decimals":"0"},"chf":{"name":"Swiss Franc","rate":"0.99269804921425","left":"CHF ","decimals":"2"},"kmf":{"name":"\tComoro franc","rate":"417.06069561266","decimals":"0"},"afn":{"name":"Afghan afghani","rate":"71.591906815212","decimals":"2"},"all":{"name":"Albanian lek","rate":"108.13048859551","decimals":"2"},"dzd":{"name":"Algerian Dinar","rate":"116.51834710516","decimals":"2"},"aoa":{"name":"Angolan kwanza","rate":"233.71337579618","decimals":"2"},"ars":{"name":"Argentine Peso","rate":"24.359155849237","left":"$","decimals":"2"},"amd":{"name":"Armenia Dram","rate":"481.67381693261"},"awg":{"name":"Aruban florin","rate":"1.7772449869224","decimals":"2"},"azn":{"name":"Azerbaijan Manat","rate":"1.7002433974285"},"bsd":{"name":"Bahamian Dollar","rate":"1","decimals":"2"},"bhd":{"name":"Bahrain Dinar","rate":"0.37605074333743","left":"BD ","decimals":"3","point":"."},"bdt":{"name":"Bangladeshi taka","rate":"84.664625498038","decimals":"2"},"bbd":{"name":"Barbadian Dollar","rate":"1.9999776765583","left":"Bds$ ","decimals":"2","point":"."},"byn":{"name":"Belarussian Ruble","rate":"1.9976301113807"},"bzd":{"name":"Belize dollar","rate":"2.0070561207746","decimals":"2"},"bob":{"name":"Bolivian Boliviano","rate":"6.8922570296282","left":"Bs. ","decimals":"2","point":"."},"bam":{"name":"Bosnia and Herzegovina convertible mark","rate":"1.6675604435557","decimals":"2"},"bwp":{"name":"Botswana Pula","rate":"9.9800238397555","decimals":"2"},"brl":{"name":"Brazilian Real","rate":"3.6475150355625","left":"R$","decimals":"2"},"bnd":{"name":"Brunei Dollar","rate":"1.3411161149199","decimals":"2"},"bgn":{"name":"Bulgarian Lev","rate":"1.6702837063196","decimals":"2"},"bif":{"name":"Burundian franc","rate":"1759.012464046","decimals":"0"},"khr":{"name":"Cambodian riel","rate":"4104.3624161075","decimals":"2"},"cve":{"name":"Cape Verde escudo","rate":"94.326478149102","decimals":"0"},"xaf":{"name":"Central African CFA Franc","rate":"561.70793971703","decimals":"2"},"xpf":{"name":"CFP Franc","rate":"101.30031472586","decimals":"2"},"clp":{"name":"Chilean Peso","rate":"627.07494776502","decimals":"2"},"cny":{"name":"Chinese Yuan","rate":"6.3886454074398","decimals":"2"},"cop":{"name":"Colombian Peso","rate":"2851.682714367","decimals":"2"},"cdf":{"name":"Congolese franc","rate":"1605.8205689278","decimals":"2"},"crc":{"name":"Costa Rican Col\u00f3n","rate":"564.25542916475","left":"\u20a1","decimals":"2","point":"."},"hrk":{"name":"Croatian Kuna","rate":"6.3122365213198","decimals":"2"},"cup":{"name":"Cuban peso","rate":"1","decimals":"2"},"czk":{"name":"Czech Koruna","rate":"22.039675424497","right":" K\u010d","decimals":"2","point":"."},"dkk":{"name":"Danish Krone","rate":"6.3621012549858","left":"kr ","decimals":"2"},"djf":{"name":"Djiboutian franc","rate":"177.612662762","decimals":"0"},"dop":{"name":"Dominican Peso","rate":"49.42400931174","left":"RD$ ","decimals":"2","point":"."},"xcd":{"name":"East Caribbean Dollar","rate":"2.7069715971966","decimals":"2"},"egp":{"name":"Egyptian Pound","rate":"17.87507198246","left":"E\u00a3","decimals":"2","point":"."},"ern":{"name":"Eritrean nakfa","rate":"15.056627000411","decimals":"2"},"etb":{"name":"Ethiopian birr","rate":"27.485393258427","decimals":"2"},"fjd":{"name":"Fiji Dollar","rate":"2.061751980671","decimals":"2"},"gmd":{"name":"Gambian dalasi","rate":"47.71521456437","decimals":"2"},"gel":{"name":"Georgian lari","rate":"2.4362924108625","decimals":"2"},"ghs":{"name":"Ghanaian Cedi","rate":"4.5655095184771","decimals":"2"},"gip":{"name":"Gibraltar pound","rate":"0.74831749398376","decimals":"2"},"gtq":{"name":"Guatemalan Quetzal","rate":"7.4443091905052","decimals":"2"},"gnf":{"name":"Guinean franc","rate":"9015.4791154794","decimals":"0"},"gyd":{"name":"Guyanese dollar","rate":"206.50008441668","decimals":"2"},"htg":{"name":"Haitian gourde","rate":"64.260945709282","decimals":"2"},"hnl":{"name":"Honduran Lempira","rate":"23.780298120545","decimals":"2"},"hkd":{"name":"Hong Kong Dollar","rate":"7.8495635205545","left":"HK$ ","decimals":"2"},"huf":{"name":"Hungarian Forint","rate":"272.16277505791","decimals":"2"},"isk":{"name":"Icelandic Krona","rate":"105.51133060863","decimals":"2"},"inr":{"name":"Indian Rupee","rate":"68.327311569871","decimals":"2"},"idr":{"name":"Indonesian Rupiah","rate":"14174.127565998","decimals":"2"},"irr":{"name":"Iranian rial","rate":"42092.475457879","decimals":"2"},"iqd":{"name":"Iraqi dinar","rate":"1191.3311688312","decimals":"3"},"ils":{"name":"Israeli New Sheqel","rate":"3.5771360374865","left":"\u20aa","decimals":"2"},"jmd":{"name":"Jamaican Dollar","rate":"126.09278350516","decimals":"2"},"jod":{"name":"Jordanian Dinar","rate":"0.70895737411516","left":"JD","decimals":"3","point":"."},"kzt":{"name":"Kazakhstani Tenge","rate":"326.00661305443","decimals":"2"},"kes":{"name":"Kenyan shilling","rate":"100.75512109397","decimals":"2"},"kwd":{"name":"Kuwaiti Dinar","rate":"0.30238147359271","decimals":"2"},"kgs":{"name":"Kyrgyzstan Som","rate":"68.31479842596"},"lak":{"name":"Lao kip","rate":"8320.4081632654","decimals":"2"},"lbp":{"name":"Lebanese Pound","rate":"1510.5850891044","decimals":"2"},"lsl":{"name":"Lesotho loti","rate":"12.66149068323","decimals":"2"},"lrd":{"name":"Liberian dollar","rate":"136.40520446097","decimals":"2"},"lyd":{"name":"Libyan Dinar","rate":"0.71592897844576","decimals":"2"},"mop":{"name":"Macanese pataca","rate":"8.066168388657","decimals":"2"},"mkd":{"name":"Macedonian denar","rate":"52.434301719088","decimals":"2"},"mga":{"name":"Malagasy ariary","rate":"3244.2970822282","decimals":"2"},"mwk":{"name":"Malawian kwacha","rate":"719.89405532668","decimals":"2"},"myr":{"name":"Malaysian Ringgit","rate":"3.9799560575733","decimals":"2"},"mvr":{"name":"Maldivian rufiyaa","rate":"15.436684896929","decimals":"2"},"mru":{"name":"Mauritanian ouguiya","rate":"35.486460348163","decimals":"2"},"mur":{"name":"Mauritian Rupee","rate":"34.458540015671","decimals":"2"},"mxn":{"name":"Mexican Peso","rate":"19.779538753015","left":"Mex$ ","decimals":"2"},"mdl":{"name":"Moldova Lei","rate":"16.796802024996"},"mnt":{"name":"Mongolian togrog","rate":"2404.5216251639","decimals":"2"},"mad":{"name":"Moroccan Dirham","rate":"9.4642765024504","decimals":"2"},"mzn":{"name":"Mozambican metical","rate":"61.565436241612","decimals":"2"},"mmk":{"name":"Myanma Kyat","rate":"1362.0267260579","decimals":"2"},"nad":{"name":"Namibian dollar","rate":"12.657123145913","decimals":"2"},"npr":{"name":"Nepalese Rupee","rate":"108.87421981957","decimals":"2"},"ang":{"name":"Neth. Antillean Guilder","rate":"1.7923505275498","decimals":"2"},"twd":{"name":"New Taiwan Dollar ","rate":"29.981639238853","decimals":"2"},"tmt":{"name":"New Turkmenistan Manat","rate":"3.4931237266637"},"nzd":{"name":"New Zealand Dollar","rate":"1.4481353023765","left":"NZ$ ","decimals":"2"},"nio":{"name":"Nicaraguan C\u00f3rdoba","rate":"31.362078309138","left":"C$ ","decimals":"2","point":"."},"ngn":{"name":"Nigerian Naira","rate":"305.54928767809","left":"\u20a6"},"nok":{"name":"Norwegian Krone","rate":"8.1135777095135","left":"kr ","decimals":"2"},"omr":{"name":"Omani Rial","rate":"0.4049821199947","decimals":"2"},"pkr":{"name":"Pakistani Rupee","rate":"115.6233583639","left":"\u20a8 ","decimals":"2"},"pab":{"name":"Panamanian Balboa","rate":"1","decimals":"2"},"pgk":{"name":"Papua New Guinean kina","rate":"3.2624394506645","left":"K","decimals":"2"},"pyg":{"name":"Paraguayan Guaran\u00ed","rate":"5648.5911118997","right":"\u20b2","decimals":"0","point":"."},"pen":{"name":"Peruvian Nuevo Sol","rate":"3.2704243938987","decimals":"2"},"php":{"name":"Philippine Peso","rate":"52.467105777694","decimals":"2"},"pln":{"name":"Polish Zloty","rate":"3.6729086772735","decimals":"2"},"qar":{"name":"Qatari Rial","rate":"3.6358501783592","decimals":"2"},"ron":{"name":"Romanian New Leu","rate":"3.9536164321728","decimals":"2"},"rub":{"name":"Russian Rouble","rate":"61.569948498793","decimals":"2"},"rwf":{"name":"Rwandan franc","rate":"868.0624556423","decimals":"0"},"svc":{"name":"Salvadoran colon","rate":"8.7405907575038","decimals":"2"},"wst":{"name":"Samoan tala","rate":"2.5279366172925","decimals":"2"},"stn":{"name":"S\u00e3o Tom\u00e9 and Pr\u00edncipe Dobra","rate":"20.931545921278","decimals":"2"},"sar":{"name":"Saudi Riyal","rate":"3.7503893970048","decimals":"2"},"rsd":{"name":"Serbian Dinar","rate":"100.78767660911","decimals":"2"},"scr":{"name":"Seychelles rupee","rate":"13.435737824973","decimals":"2"},"sll":{"name":"Sierra Leonean leone","rate":"7857.1734475375","decimals":"2"},"sgd":{"name":"Singapore Dollar","rate":"1.3436925895444","left":"S$ ","decimals":"2"},"sbd":{"name":"Solomon Islands dollar","rate":"7.6603340292276","decimals":"2"},"sos":{"name":"Somali shilling","rate":"577.6605793451","decimals":"2"},"zar":{"name":"South African Rand","rate":"12.574154981645","left":"R ","decimals":"2"},"krw":{"name":"South Korean Won","rate":"1081.5117840042","left":"\u20a9","decimals":"2"},"ssp":{"name":"South Sudanese pound","rate":"136.7967788838","decimals":"2"},"lkr":{"name":"Sri Lanka Rupee","rate":"157.76507008341","decimals":"2"},"sdg":{"name":"Sudanese pound","rate":"18.03982300885","decimals":"2"},"srd":{"name":"Surinamese dollar","rate":"7.4639951179821","decimals":"2"},"szl":{"name":"Swazi lilangeni","rate":"12.66149068323","decimals":"2"},"sek":{"name":"Swedish Krona","rate":"8.7690007597004","left":"kr ","decimals":"2"},"syp":{"name":"Syrian pound","rate":"516.80281690143","decimals":"2"},"tjs":{"name":"Tajikistan Ruble","rate":"8.9792930275267"},"tzs":{"name":"Tanzanian shilling","rate":"2277.6536312849","decimals":"2"},"thb":{"name":"Thai Baht","rate":"32.119474760863","left":"\u0e3f","decimals":"2"},"top":{"name":"Tongan pa\u02bbanga","rate":"2.1996882680895","decimals":"2"},"ttd":{"name":"Trinidad Tobago Dollar","rate":"6.7301907556863","decimals":"2"},"tnd":{"name":"Tunisian Dinar","rate":"2.5348917543633","decimals":"2"},"try":{"name":"Turkish Lira","rate":"4.7638351973546","decimals":"2"},"aed":{"name":"U.A.E Dirham","rate":"3.6724496734668","decimals":"2"},"ugx":{"name":"Ugandan shilling","rate":"3725.1776649745","decimals":"0"},"uah":{"name":"Ukrainian Hryvnia","rate":"26.082322655001"},"uyu":{"name":"Uruguayan Peso","rate":"31.302829251297","left":"U$ ","decimals":"2","point":"."},"uzs":{"name":"Uzbekistan Sum","rate":"7996.0317228749"},"vuv":{"name":"Vanuatu vatu","rate":"111.35963581184","decimals":"2"},"vef":{"name":"Venezuelan Bolivar","rate":"77269.171570542","decimals":"2"},"vnd":{"name":"Vietnamese Dong","rate":"22608.693535186","right":"\u20ab","decimals":"0"},"xof":{"name":"West African CFA Franc","rate":"561.12933283618","decimals":"2"},"yer":{"name":"Yemeni rial","rate":"249.68018508438","decimals":"2"},"zmw":{"name":"Zambian kwacha","rate":"10.220891364903","decimals":"2"}};
//	var frForms = new Array();
function frExCalc(inverseCalc) { 	}

function frCalcRate(formObj, inverseCalc)
{
  if (formObj) {
    // form exists and we can proceed
    var baseCurObj = formObj.base_currency;
    var targetCurObj = formObj.target_currency;
    var baseValueObj = formObj.base_value;
    var targetValueObj = formObj.target_value;
    if (baseCurObj && targetCurObj && baseValueObj && targetValueObj) {
      if (baseCurObj.type == "select-one") {
        var baseCurrency = baseCurObj.options[baseCurObj.selectedIndex].value.toLowerCase();
      } else {
        var baseCurrency = baseCurObj.value;
      }
      if (targetCurObj.type == "select-one") {
        var targetCurrency = targetCurObj.options[targetCurObj.selectedIndex].value.toLowerCase();
      } else {
        var targetCurrency = targetCurObj.value;
      }
      var targetExRate = frCrExRs[targetCurrency]["rate"] / frCrExRs[baseCurrency]["rate"];
      var targetValue = targetValueObj.value;
      var baseValue = baseValueObj.value;

      if (inverseCalc) {
        if (!targetValue || isNaN(targetValue)) {
          baseValueObj.value = "";
        } else {
          baseValueObj.value = frFormatNumber(targetValue / targetExRate, 2, ".", "");
        }
      } else {
        if (!baseValue || isNaN(baseValue)) {
          targetValueObj.value = "";
        } else {
          targetValueObj.value = frFormatNumber(baseValue * targetExRate, 2, ".", "");
        }
      }
    }
  }
}

function frFormatNumber(numberValue, decimals, decimalPoint, thousandsSeparator)
{
if (decimals == undefined) {
  decimals = 0;
}
if (thousandsSeparator == undefined) {
  thousandsSeparator = ",";
}

var numberParts = "";
var roundValue = 1;
for (var d = 0; d < decimals; d++) {
  roundValue *= 10;
}
numberValue = Math.round(numberValue * roundValue) / roundValue;
var numberSign = "";
if (numberValue < 0) {
  numberSign = "-";
  numberValue = Math.abs(numberValue);
}

var numberText = new String(numberValue);
var numberParts = numberText.split(".");
var beforeDecimal = numberParts[0];
var afterDecimal = "";
numberText = "";
if (numberParts.length == 2) {
  afterDecimal = numberParts[1];
}
while (beforeDecimal.length > 0) {
  if (beforeDecimal.length > 3) {
    numberText = thousandsSeparator + beforeDecimal.substring(beforeDecimal.length - 3, beforeDecimal.length) + numberText;
    beforeDecimal = beforeDecimal.substring(0, beforeDecimal.length - 3);
  } else {
    numberText = beforeDecimal + numberText;
    beforeDecimal = "";
  }
}
if (decimals > 0) {
  while (afterDecimal.length < decimals) {
    afterDecimal += "0";
  }
  if (decimalPoint == undefined) {
    decimalPoint = ".";
  }
  numberText += decimalPoint + afterDecimal;
}
numberText = numberSign + numberText;

return numberText;
}

//document.getElementById("myBtn").addEventListener("click", function() {    myFunction(p1, p2);});

function frInit()
{
// check all available forms on page
var frForms = new Array();
var formIndex = "";
var formObj = document.getElementById("frConverter");
if (formObj) {
  // empty form exists
  frForms[frForms.length] = formObj;
}

formIndex = 1;
formObj = document.getElementById("frConverter1");
while (formObj) {
  frForms[frForms.length] = formObj;
  formIndex++;
  formObj = document.getElementById("frConverter" + formIndex);
}

var objs = document.getElementsByClassName("frConverter");
for (var ob = 0; ob < objs.length; ob++) {
  formObj = objs[ob];
  if (formObj) {
    frForms[frForms.length] = formObj;
  }
}


//if (form[i].type == "text" || form[i].type == "hidden" || form[i].type == "select-one") {

// check link first and add it if it does not exists
for (var f = 0; f < frForms.length; f++) {
  (function () {
    formObj = frForms[f];
    var passObj = formObj;

    var isLink = true;
    var linkObj = document.getElementById("frLink");
    if (!linkObj) {
      objs = formObj.getElementsByClassName("frLink");
      if (objs && objs[0]) { linkObj = objs[0]; }
    }
    var linkHref = "";
    if (linkObj) {
      linkHref = linkObj.href;
    }
    var hrefRegex = /floatrates.com/i;
    if (!linkObj || !hrefRegex.exec(linkHref)) {
      isLink = false;
    } else {
      var linkTitle = linkObj.innerHTML.toLowerCase();
      var regex = /currency\s*converter|exchange\s*rates|convert/i;
      if (!regex.exec(linkTitle)) {
        isLink = false;
      }
    }
    if (!isLink) {
      formObj.innerHTML = formObj.innerHTML;
    }


    // populate select box controls if they empty
    var selectedOpt = false;
    var totalOptions = 0;
    var baseCurObj = formObj.base_currency;
    var targetCurObj = formObj.target_currency;
    var baseValObj = formObj.base_value;
    var targetValObj = formObj.target_value;
    if (baseCurObj && baseCurObj.type == "select-one") {
      totalOptions = baseCurObj.options.length;
      if (totalOptions == 0) {
        var defaultBase = "";
        if (formObj.default_base) {
          defaultBase = formObj.default_base.value;
        }
        for (var curCode in frCrExRs) {
          if (defaultBase.toLowerCase() == curCode) {
            selectedOpt = true;
          } else {
            selectedOpt = false;
          }
          baseCurObj.options[baseCurObj.options.length] = new Option(frCrExRs[curCode]["name"], curCode);
          if (selectedOpt) {
            baseCurObj.options[baseCurObj.options.length - 1].selected = true;
          }
        }
      }
    }
    if (targetCurObj && targetCurObj.type == "select-one") {
      totalOptions = targetCurObj.options.length;
      if (totalOptions == 0) {
        var defaultTarget = "";
        if (formObj.default_target) {
          defaultTarget = formObj.default_target.value;
        }
        for (var curCode in frCrExRs) {
          if (defaultTarget.toLowerCase() == curCode) {
            selectedOpt = true;
          } else {
            selectedOpt = false;
          }
          targetCurObj.options[targetCurObj.options.length] = new Option(frCrExRs[curCode]["name"], curCode);
          if (selectedOpt) {
            targetCurObj.options[targetCurObj.options.length - 1].selected = true;
          }
        }
      }
    }
    // end populate controls
    // add events to currency controls
    if (baseCurObj) {
      baseCurObj.addEventListener("change", function() { frCalcRate(passObj, false); } );
      baseCurObj.addEventListener("keyup", function() { frCalcRate(passObj, false); } );
    }
    if (targetCurObj) {
      targetCurObj.addEventListener("change", function() { frCalcRate(passObj, false); } );
      targetCurObj.addEventListener("keyup", function() { frCalcRate(passObj, false); } );
    }
    if (baseValObj) {
      baseValObj.addEventListener("keyup", function() { frCalcRate(passObj, false); } );
    }
    if (targetValObj) {
      targetValObj.addEventListener("keyup", function() { frCalcRate(passObj, true); } );
    }
    // calculate initial rate
    frCalcRate(formObj, false);
  }())
}

var priceObjs = document.getElementsByClassName("frPrice");
for (var p = 0; p < priceObjs.length; p++) {
  var priceObj = priceObjs[p];
  var priceValue = priceObj.getAttribute("data-value");
  var baseCurrency = priceObj.getAttribute("data-base");
  if (!baseCurrency) { baseCurrency = "usd"; }
  baseCurrency = baseCurrency.toLowerCase();
  var targetCurrency = priceObj.getAttribute("data-target");
  if (!targetCurrency) { targetCurrency = "usd"; }
  targetCurrency = targetCurrency.toLowerCase();
  if (priceValue && !isNaN(priceValue) && frCrExRs[baseCurrency] && frCrExRs[targetCurrency]) {
    var cLeft = ""; var cRight = ""; var cDecimals = ""; var cPoint = ""; var cSeparator = "";
    if (priceObj.hasAttribute("data-left") || priceObj.hasAttribute("data-right")) {
      if (priceObj.hasAttribute("data-left")) { cLeft = priceObj.getAttribute("data-left"); }
      if (priceObj.hasAttribute("data-right")) { cRight = priceObj.getAttribute("data-right"); }
    } else {
      if (frCrExRs[targetCurrency]["left"]) { cLeft = frCrExRs[targetCurrency]["left"]; }
      if (frCrExRs[targetCurrency]["right"]) { cRight = frCrExRs[targetCurrency]["right"]; }
    }
    if (priceObj.hasAttribute("data-decimals")) {
      cDecimals = priceObj.getAttribute("data-decimals");
    } else if (frCrExRs[targetCurrency]["decimals"]) {
      cDecimals = frCrExRs[targetCurrency]["decimals"];
    }
    if (priceObj.hasAttribute("data-point")) {
      cPoint = priceObj.getAttribute("data-point");
    } else if (frCrExRs[targetCurrency]["point"]) {
      cPoint = frCrExRs[targetCurrency]["point"];
    } else {
      cPoint = ".";
    }
    if (priceObj.hasAttribute("data-separator")) {
      cSeparator = priceObj.getAttribute("data-separator");
    } else if (frCrExRs[targetCurrency]["separator"]) {
      cSeparator = frCrExRs[targetCurrency]["separator"];
    }
    // show target value
    var targetRate = frCrExRs[targetCurrency]["rate"] / frCrExRs[baseCurrency]["rate"];
    priceObj.innerHTML = cLeft + frFormatNumber((priceValue*targetRate), cDecimals, cPoint, cSeparator) + cRight;
  }
}

}

frInit();
//frExCalc();
